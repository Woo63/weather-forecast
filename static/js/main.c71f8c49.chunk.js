(this["webpackJsonpweather-forecast"]=this["webpackJsonpweather-forecast"]||[]).push([[0],[,,,,,,function(e,t,c){},,,,,,function(e,t,c){},function(e,t,c){},,function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(7),r=c.n(s),i=(c(12),c(13),c(3)),l=c.n(i),o=c(4),u=c(2),j=(c(6),["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]),d=[{name:"Samara",latitude:53.195873,longitude:50.100193},{name:"Saratov",latitude:51.533557,longitude:46.034257},{name:"Kazan",latitude:55.796127,longitude:49.106405},{name:"Krasnodar",latitude:45.03547,longitude:38.975313},{name:"Togliatti",latitude:53.507836,longitude:49.420393}],b="373651eef091af2d1670e866f24aa876",f=(c(15),c(0));var m=function(e){var t=Object(a.useState)(!1),c=Object(u.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)("select__head close"),i=Object(u.a)(r,2),l=i[0],o=i[1],j=Object(a.useState)("select__list close"),b=Object(u.a)(j,2),m=b[0],O=b[1],h=Object(a.useState)("Select city"),p=Object(u.a)(h,2),x=p[0],g=p[1],v=Object(a.useState)({color:"#8083A4"}),_=Object(u.a)(v,2),N=_[0],y=_[1];return Object(a.useEffect)((function(){"Select city"!==x&&e.setCity(x)}),[x]),n&&"select__head"!==l?(o("select__head"),O("select__list")):n||"select__head close"===l||(o("select__head close"),O("select__list close")),Object(f.jsxs)("div",{className:"select",onClick:function(){return s(!n)},children:[Object(f.jsx)("input",{className:"select__input",type:"hidden",name:""}),Object(f.jsxs)("div",{className:l,style:N,children:[" ",x," "]}),Object(f.jsx)("ul",{className:m,onClick:function(e){return function(e){var t=e.target;g(d[Number(t.id)].name),y({color:"#2C2D76"})}(e)},children:d.map((function(e,t){return Object(f.jsx)("li",{className:"select__item",id:t.toString(),children:e.name},t)}))})]})};c(17);var O=function(){return Object(f.jsxs)("div",{className:"plugBlock",children:[Object(f.jsx)("div",{className:"plugBlock__img"}),Object(f.jsx)("p",{className:"plugBlock__text",children:"Fill in all the fields and the weather will be displayed"})]})};c(18);var h=function(e){return Object(f.jsxs)("div",{className:"dayWeatherCard ".concat(e.className),children:[Object(f.jsx)("span",{className:"dayWeatherCard__date",children:e.forecast.date}),Object(f.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(e.forecast.icon,"@2x.png"),alt:"error",className:"dayWeatherCard__icon ".concat(e.className)}),Object(f.jsxs)("h1",{className:"dayWeatherCard__temp",children:["+",e.forecast.temp,"\xb0"]})]})};c(19);var p=function(e){return Object(f.jsxs)("div",{className:"date select",children:[Object(f.jsx)("input",{className:"date__input",type:"date",onChange:function(t){return e.setDate(function(e){if(e){var t=e.split(/[- /.]/);return t[2]+"/"+t[1]+"/"+t[0]}return""}(t.target.value))}}),Object(f.jsx)("input",{className:"date__head",value:e.date,placeholder:"Select date",pattern:"^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](2021)$",onChange:function(t){return e.setDate(t.target.value)},onSubmit:function(){return console.log("submit")}})]})};var x=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(""),r=Object(u.a)(s,2),i=r[0],x=r[1],g=Object(a.useState)(""),v=Object(u.a)(g,2),_=v[0],N=v[1],y=Object(a.useState)(null),S=Object(u.a)(y,2),w=S[0],k=S[1],C=Object(a.useState)(!1),F=Object(u.a)(C,2),B=F[0],D=F[1],E=Object(a.useState)(""),M=Object(u.a)(E,2),T=M[0],W=M[1];return Object(a.useEffect)((function(){if(c.length&&i.length){var e=d.findIndex((function(e){return e.name===c})),t=d[e];(function(){var e=Object(o.a)(l.a.mark((function e(){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.openweathermap.org/data/2.5/onecall/timemachine?lat=".concat(t.latitude,"&lon=").concat(t.longitude,"&dt=").concat(_,"&units=metric&appid=").concat(b));case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,k({temp:Math.floor(a.current.temp),date:T,icon:a.current.weather[0].icon}),D(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}}),[c,_]),Object(a.useEffect)((function(){if(/^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](2021)/.exec(i)){var e=new Date(function(){var e=i.split(/[- /.]/);return e[2]+"-"+e[1]+"-"+e[0]}());(new Date).getTime()-e.getTime()<432e6?(W(e.getDate()+" "+j[e.getMonth()]+" "+e.getFullYear()),N((e.getTime()/1e3).toString())):console.log("\u0411\u043e\u043b\u0435\u0435 \u043f\u044f\u0442\u0438 \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434")}}),[i]),Object(f.jsxs)("section",{className:"forecastBlock",children:[Object(f.jsx)("h2",{className:"forecastBlock__title",children:"Forecast for a Date in the Past"}),Object(f.jsxs)("div",{className:"selectBlock",children:[Object(f.jsx)(m,{setCity:n}),Object(f.jsx)(p,{date:i,setDate:x})]}),B?Object(f.jsx)(h,{forecast:w,className:"past"}):Object(f.jsx)(O,{})]})};c(20);var g=function(e){var t=Object(a.useState)(0),c=Object(u.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(!0),i=Object(u.a)(r,2),l=i[0],o=i[1],j=Object(a.useState)(!1),d=Object(u.a)(j,2),b=d[0],m=d[1],O=Object(a.useState)(!0),p=Object(u.a)(O,2),x=p[0],g=p[1];function v(e){e?n<5&&(s(n+1),n+1===5&&m(!0),x&&g(!1)):n>0&&(s(n-1),n-1===0&&g(!0),b&&m(!1))}function _(){document.documentElement.clientWidth>1400&&!l&&o(!0),l&&document.documentElement.clientWidth<1400&&o(!1)}return Object(a.useEffect)((function(){_(),window.addEventListener("resize",_)})),Object(f.jsxs)("div",{className:"dailyForecastBlock",children:[Object(f.jsx)("div",{className:"dailyForecastBlock__cards",children:e.forecast.map((function(e,t){return function(e,t){return l?e>=n&&e<n+3?Object(f.jsx)(h,{forecast:t,className:"now"},e):void 0:Object(f.jsx)(h,{forecast:t,className:"now"},e)}(t,e)}))}),l?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{className:"dailyForecastBlock__control prev",onClick:function(){return v(!1)},disabled:x}),Object(f.jsx)("button",{className:"dailyForecastBlock__control next",onClick:function(){return v(!0)},disabled:b})]}):Object(f.jsx)(f.Fragment,{})]})};var v=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)([]),r=Object(u.a)(s,2),i=r[0],h=r[1],p=Object(a.useState)(!1),x=Object(u.a)(p,2),v=x[0],_=x[1];function N(e){for(var t=new Date,c=[],a=0;a<e.daily.length;a++)c.push({temp:Math.floor(e.daily[a].temp.day),icon:e.daily[a].weather[0].icon,date:t.getDate()+a+" "+j[t.getMonth()]+" "+t.getFullYear()});return c}return Object(a.useEffect)((function(){if(c.length){var e=d.findIndex((function(e){return e.name===c})),t=d[e];(function(){var e=Object(o.a)(l.a.mark((function e(){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(t.latitude,"&lon=").concat(t.longitude,"&units=metric&exclude=hourly,alerts,minutely,current&appid=").concat(b));case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,h(N(a)),_(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}}),[c]),Object(f.jsxs)("section",{className:"forecastBlock",children:[Object(f.jsx)("h2",{className:"forecastBlock__title",children:"7 Days Forecast"}),Object(f.jsx)(m,{setCity:n}),v?Object(f.jsx)(g,{forecast:i}):Object(f.jsx)(O,{})]})};var _=function(){return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("header",{className:"header",children:Object(f.jsxs)("h1",{className:"title",children:[" Weather ",Object(f.jsx)("div",{children:"forecast"})]})}),Object(f.jsxs)("main",{className:"main",children:[Object(f.jsx)(v,{}),Object(f.jsx)(x,{})]}),Object(f.jsx)("footer",{className:"footer",children:"C \u041b\u042e\u0411\u041e\u0412\u042c\u042e \u041e\u0422 MERCURY DEVELOPMENT"})]})},N=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,22)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};r.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(_,{})}),document.getElementById("root")),N()}],[[21,1,2]]]);
//# sourceMappingURL=main.c71f8c49.chunk.js.map